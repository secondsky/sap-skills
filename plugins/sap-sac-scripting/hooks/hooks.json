{
  "description": "SAC script validation and best practices hooks for SAP Analytics Cloud scripting",
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "First, check if the file being written/edited is a SAC (SAP Analytics Cloud) script. It is a SAC script ONLY if the file content contains SAC-specific API signatures such as: getDataSource, getPlanning, Application.showMessage, Application.showBusyIndicator, Chart_, Table_, Dropdown_, RadioButtonGroup_, getMembers(), setDimensionFilter(), MemberAccessMode, getResultSet(), onInitialization, ScriptObject.\n\nIf the file is NOT a SAC script, output nothing.\n\nIf it IS a SAC script, analyze it for common issues:\n\n1. **Performance Issues**:\n   - getMembers() without accessMode parameter (should use {accessMode: MemberAccessMode.BookedValues})\n   - Multiple setDimensionFilter() calls without setRefreshPaused(true/false) batching\n   - Heavy code in onInitialization events\n   - getData() instead of getResultSet() for cached access\n\n2. **Error-Prone Patterns**:\n   - Accessing array index [0] without checking length first\n   - Missing null checks before calling methods on objects\n   - Dimension/measure names that might be case-sensitive typos\n\n3. **Best Practice Violations**:\n   - Missing error handling (try/catch) around planning operations\n   - No busy indicator for long operations\n   - Console.log statements left in production code (warn only)\n\nIf issues found, return a brief warning with the specific issues. If no issues found, return 'approve'.",
            "timeout": 30
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "First, check if the file just written/edited is a SAC (SAP Analytics Cloud) script. It is a SAC script ONLY if the file content contains SAC-specific API signatures such as: getDataSource, getPlanning, Application.showMessage, Chart_, Table_, Dropdown_, getMembers(), setDimensionFilter(), MemberAccessMode, getResultSet(), ScriptObject.\n\nIf the file is NOT a SAC script, output nothing.\n\nIf it IS a SAC script, provide a brief tip about testing:\n- Test in SAC with F12 DevTools Console open\n- Use console.log() to trace execution\n- For planning operations, test with both private and public versions\n\nKeep response to 1-2 sentences.",
            "timeout": 15
          }
        ]
      }
    ]
  }
}
